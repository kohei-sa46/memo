DROP TABLE memos;
DROP TABLE users;

CREATE TABLE users (
    user_id VARCHAR2(10) PRIMARY KEY,
    password VARCHAR2(10) NOT NULL,
    theme_mode VARCHAR2(10) DEFAULT 'light' NOT NULL -- theme_modeをここに追加
);

CREATE TABLE memos (
    memo_id       NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    content       VARCHAR2(4000) NOT NULL,                            
    created_at    DATE DEFAULT CURRENT_TIMESTAMP NOT NULL,  
    updated_at    DATE,                                   
    user_id       VARCHAR2(10) NOT NULL,                              
    CONSTRAINT fk_user FOREIGN KEY (user_id) REFERENCES users(user_id)
);

CREATE OR REPLACE TRIGGER update_memo_timestamp
BEFORE UPDATE OF content ON memos
FOR EACH ROW
BEGIN
    :NEW.updated_at := CURRENT_TIMESTAMP; 
END;
/

INSERT INTO users (user_id, password, theme_mode) VALUES ('Admin', 'qwer', 'light');

COMMIT;
